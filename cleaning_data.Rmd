---
title: "Cleaning Data"
author: "Danielle Reimanis"
date: "10/17/2019"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r}
library(dplyr)
library(tidyverse)
library(tidyr)
library(lubridate)

```

# Reading in data

```{r}

bm21_10 <- read.csv('data/BM21_TRH_10min_C9-C6-AA-20-88-31_2019-07-01_17-51.csv')
bm25 <- read.csv('data/BM25_TRH_C7A952580C33_2019-07-04_1001.csv')
bm26 <- read.csv('data/BM26_TRH_EC45A77D726D_2019-07-04_1001.csv')
bm28 <- read.csv('data/BM28_TRH_FB02A740827F_2019-07-08_1501.csv')
bm30 <- read.csv('data/BM30_TRH_F5B7F211C84E_2019-07-08_1101.csv')
bm31 <- read.csv('data/BM31_TRH_EE2DE1DBAD2D_2019-07-08_1101.csv')
bm32 <- read.csv('data/BM32_TRH_C5C6BC90A5FC_2019-07-08_1201.csv')
bm33 <- read.csv('data/BM33_TRH-D8B0D975ADA5_2019-07-08_1401.csv')
bm42 <- read.csv('data/BM42_Pr_CCECD8382986_2019-07-04_1001.csv')
bm43 <- read.csv('data/BM43_Pr_C457F4BBC9C0_2019-07-08_1101.csv')
bm44 <- read.csv('data/BM44_Pr-D4F2BAE78C5A_2019-07-08_1401.csv')
bn29 <- read.csv('data/BN29_TRH_D044A89B966C_2019-07-08_1101.csv')

```

# Cleaning data, selecting relevant observations, joining to long

```{r}

files <- list.files('data',full.names = T)

my_reader <- function(file){
  data_names = str_split_fixed(file,'_',2)[,1]
  name = gsub('data/','',data_names)
  df <- read_csv(file,) %>%
    select(address, name, version, logging_interval)%>%
    rename('date' = 1,
           'temp' = 2,
           'humidity' = 3,
           'dewpoint' = 4) %>%
    mutate(temp = as.numeric(temp))%>%
    mutate(humidity = as.numeric(humidity))%>%
    mutate(dewpoint = as.numeric(dewpoint))%>%
    slice(-1,-2)%>%
    mutate(site = name)
  return(df)
}

data_clean <- map_dfr(files,my_reader)
str(data_clean)
```


```{r}


```

